(function(){SG.Book=function(){},SG.Book.prototype=new SG.Publisher,SG.Book.prototype.parseDesc=function(){var e=$(".book .desc").text();marked=SG.markSettingNoHightlight();var t=marked(e);t=SG.replaceCodeChar(t),$(".book .desc").html(t)},jQuery(document).ready(function(t){var i=!1;t(".desc .preview").on("click",function(){if(i)t(".preview-div").hide(),t("#desc").show(),i=!1;else{var e=t("#desc").val();marked.setOptions({highlight:function(e){return e=(e=(e=e.replace(/&#34;/g,'"')).replace(/&lt;/g,"<")).replace(/&gt;/g,">"),hljs.highlightAuto(e).value}}),t("#desc").hide(),t(".preview-div").html(marked(e)).show(),i=!0}}),t("#submit").on("click",function(e){if(e.preventDefault(),!t(".validate-form").validate().form())return!1;(new SG.Book).publish(this)}),t(document).keypress(function(e){!e.ctrlKey||10!=e.which&&13!=e.which||t("#submit").click()})})}).call(this);