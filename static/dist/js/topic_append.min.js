(function(){emojify.setConfig({only_crawl_id:null,img_dir:SG.EMOJI_DOMAIN,ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}}),SG.TopicAppend=function(){},SG.TopicAppend.prototype=new SG.Publisher,jQuery(document).ready(function(n){n(".need-autogrow").autoGrow(),n("#content").on("keydown",function(e){if(9==e.keyCode){e.preventDefault();var t="\t",n=this.selectionStart,i=this.selectionEnd,o=window.getSelection().toString();o=t+o.replace(/\n/g,"\n\t"),this.value=this.value.substring(0,n)+o+this.value.substring(i),this.setSelectionRange(n+t.length,n+o.length)}}),n("#content").on("input propertychange",function(){var e=n(this).val();marked=SG.markSettingNoHightlight();var t=marked(e);t=SG.replaceCodeChar(t),n("#content-preview").html(t),emojify.run(n("#content-preview").get(0))}),n("#submit").on("click",function(e){if(e.preventDefault(),!n(".validate-form").validate().form())return!1;(new SG.TopicAppend).publish(this)}),n(document).keypress(function(e){!e.ctrlKey||10!=e.which&&13!=e.which||n("#submit").click()}),SG.registerAtEvent()})}).call(this);